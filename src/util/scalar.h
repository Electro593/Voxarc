/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\
**                                                                         **
**  Author: Aria Seiler                                                    **
**                                                                         **
**  This program is in the public domain. There is no implied warranty,    **
**  so use it at your own risk.                                            **
**                                                                         **
\* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

#define R32_EXPONENT_MASK 0x7F800000
#define R32_MAX LITERAL_CAST(u32, 0x7F7FFFFF, r32)
#define R32_INF LITERAL_CAST(u32, 0x7F800000, r32)
#define R32_PI  3.14159265359f

#define R64_SIGN_MASK     0x8000000000000000
#define R64_EXPONENT_MASK 0x7FF0000000000000
#define R64_MANTISSA_MASK 0x000FFFFFFFFFFFFF
#define R64_MANTISSA_BITS 52
#define R64_SIGN_SHIFT     63
#define R64_EXPONENT_SHIFT 52
#define R64_EXPONENT_BIAS 1023
#define R64_EXPONENT_MAX ((R64_EXPONENT_MASK>>R64_EXPONENT_SHIFT)-R64_EXPONENT_BIAS)
#define R64_NAN(Payload) LITERAL_CAST(u64, R64_EXPONENT_MASK | (Payload & R64_MANTISSA_MASK), r64)
#define R64_INF R64_NAN(0);

#define S08_MIN 0x80
#define S08_MAX 0x7F
#define S16_MIN 0x8000
#define S16_MAX 0x7FFF
#define S32_MIN 0x80000000
#define S32_MAX 0x7FFFFFFF
#define S64_MIN 0x8000000000000000
#define S64_MAX 0x7FFFFFFFFFFFFFFF

#define U08_MAX 0xFF
#define U16_MAX 0xFFFF
#define U32_MAX 0xFFFFFFFF
#define U64_MAX 0xFFFFFFFFFFFFFFFF

internal r32 R32_Floor(r32 N);
internal r32 R32_Ceil(r32 N);
internal r32 R32_sqrt(r32 N);
internal r32 R32_Abs(r32 N);

global r32 SinLookupTable[] = {
    0.00000000000, 0.01745240644, 0.03489949670, 0.05233595626, 0.06975647374,
    0.08715574277, 0.1045284632,  0.1218693435,  0.1391731010,  0.1564344651,
    0.1736481777,  0.1908089954,  0.2079116909,  0.2249510544,  0.2419218956,
    0.2588190451,  0.2756373559,  0.2923717048,  0.3090169944,  0.3255681547,
    0.3420201433,  0.3583679497,  0.3746065934,  0.3907311286,  0.4067366430,
    0.4226182618,  0.4383711467,  0.4539904998,  0.4694715630,  0.4848096203,
    0.5000000000,  0.5150380749,  0.5299192644,  0.5446390350,  0.5591929036,
    0.5735764363,  0.5877852524,  0.6018150234,  0.6156614754,  0.6293203912,
    0.6427876097,  0.6560590291,  0.6691306063,  0.6819983602,  0.6946583704,
    0.7071067810,  0.7071067810
};

global r32 CosLookupTable[] = {
    1.0000000000, 0.9998476952, 0.9993908270, 0.9986295348, 0.9975640503,
    0.9961946981, 0.9945218954, 0.9925461516, 0.9902680687, 0.9876883406,
    0.9848077530, 0.9816271835, 0.9781476007, 0.9743700648, 0.9702957263,
    0.9659258263, 0.9612616959, 0.9563047559, 0.9510565163, 0.9455185755,
    0.9396926208, 0.9335804264, 0.9271838546, 0.9205048534, 0.9135454577,
    0.9063077870, 0.8987940464, 0.8910065242, 0.8829475927, 0.8746197071,
    0.8660254040, 0.8571673007, 0.8480480961, 0.8386705680, 0.8290375725,
    0.8191520443, 0.8090169943, 0.7986355099, 0.7880107536, 0.7771459613,
    0.7660444431, 0.7547095801, 0.7431448255, 0.7313537015, 0.7193398004,
    0.7071067810, 0.7071067810
};

global r32 ArccosLookupTable[] = {
    1.570796327, 1.565240743, 1.559684987, 1.554128888, 1.548572275,
    1.543014976, 1.537456818, 1.531897629, 1.526337237, 1.520775470,
    1.515212154, 1.509647114, 1.504080178, 1.498511171, 1.492939917,
    1.487366240, 1.481789964, 1.476210912, 1.470628906, 1.465043766,
    1.459455312, 1.453863365, 1.448267743, 1.442668261, 1.437064737,
    1.431456986, 1.425844821, 1.420228054, 1.414606497, 1.408979959,
    1.403348248, 1.397711170, 1.392068532, 1.386420136, 1.380765783,
    1.375105274, 1.369438406, 1.363764975, 1.358084776, 1.352397599,
    1.346703235, 1.341001470, 1.335292090, 1.329574877, 1.323849612,
    1.318116072, 1.312374030, 1.306623261, 1.300863531, 1.295094608,
    1.289316254, 1.283528228, 1.277730288, 1.271922187, 1.266103673,
    1.260274492, 1.254434387, 1.248583095, 1.242720350, 1.236845882,
    1.230959417, 1.225060676, 1.219149374, 1.213225223, 1.207287930,
    1.201337197, 1.195372719, 1.189394187, 1.183401286, 1.177393695,
    1.171371087, 1.165333129, 1.159279481, 1.153209796, 1.147123721,
    1.141020895, 1.134900951, 1.128763510, 1.122608191, 1.116434599,
    1.110242335, 1.104030988, 1.097800138, 1.091549357, 1.085278204,
    1.078986232, 1.072672979, 1.066337974, 1.059980734, 1.053600762,
    1.047197551, 1.040770580, 1.034319313, 1.027843202, 1.021341682,
    1.014814174, 1.008260082, 1.001678794, 0.9950696789, 0.9884320889,
    0.9817653565, 0.9750687942, 0.9683416934, 0.9615833238, 0.9547929322,
    0.9479697414, 0.9411129491, 0.9342217268, 0.9272952180, 0.9203325377,
    0.9133327704, 0.9062949682, 0.8992181502, 0.8921012994, 0.8849433622,
    0.8777432452, 0.8704998140, 0.8632118901, 0.8558782490, 0.8484976176,
    0.8410686705, 0.8335900284, 0.8260602531, 0.8184778457, 0.8108412411,
    0.8031488054, 0.7953988302, 0.7875895284, 0.7797190290, 0.7717853706,
    0.7637864964, 0.7557202462, 0.7475843497, 0.7393764180, 0.7310939353,
    0.7227342478, 0.7142945546, 0.7057718946, 0.6971631336, 0.6884649502,
    0.6796738189, 0.6707859928, 0.6617974828, 0.6527040359, 0.6435011088,
    0.6341838407, 0.6247470206, 0.6151850501, 0.6054919033, 0.5956610782,
    0.5856855435, 0.5755576750, 0.5652691841, 0.5548110330, 0.5441733370,
    0.5333452489, 0.5223148217, 0.5110688475, 0.4995926610, 0.4878699065,
    0.4758822496, 0.4636090277, 0.4510268118, 0.4381088610, 0.4248244275,
    0.4111378622, 0.3970074493, 0.3823838531, 0.3672080207, 0.3514082698,
    0.3348961586, 0.3175604293, 0.2992578186, 0.2797984760, 0.2589215419,
    0.2362513061, 0.2112108803, 0.1828287169, 0.1492095735, 0.1054581174,
    0.0000000000, 0.0000000000
};

#define RAND_POLYNOMIAL_MASK32 0xB4BCD35C
#define RAND_POLYNOMIAL_MASK31 0x7A5BC2E3

typedef struct random {
    u32 LFSR32;
    u32 LFSR31;
} random;